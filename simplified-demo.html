<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplified CustomGPT Widget Demo</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Include the CustomGPT Widget -->
    <script src="./dist/widget/customgpt-widget.js"></script>
    <link rel="stylesheet" href="./dist/widget/customgpt-widget.css">
    
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }
        .card {
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .card h2 {
            margin-top: 0;
            color: #007acc;
        }
        .stats {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        .code-sample {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 14px;
        }
        .demo-section {
            margin: 40px 0;
            background: white;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .benefits {
            list-style: none;
            padding: 0;
        }
        .benefits li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }
        .benefits li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #28a745;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Simplified CustomGPT Widget Implementation</h1>
        
        <div class="comparison">
            <div class="card">
                <h2>❌ Before: Custom Implementation</h2>
                <div class="stats">
                    <strong>Lines of Code:</strong> 1400+<br>
                    <strong>Files:</strong> Single large component<br>
                    <strong>Complexity:</strong> High<br>
                    <strong>Maintenance:</strong> Difficult
                </div>
                <p>Previously, developers had to implement:</p>
                <ul>
                    <li>Session management logic</li>
                    <li>localStorage handling</li>
                    <li>Conversation switching UI</li>
                    <li>Error handling</li>
                    <li>Title editing functionality</li>
                </ul>
            </div>
            
            <div class="card">
                <h2>✅ After: Using Core Widget API</h2>
                <div class="stats">
                    <strong>Lines of Code:</strong> ~100<br>
                    <strong>Files:</strong> Simple wrapper<br>
                    <strong>Complexity:</strong> Low<br>
                    <strong>Maintenance:</strong> Easy
                </div>
                <p>Now, the core widget handles everything:</p>
                <ul class="benefits">
                    <li>Built-in session management</li>
                    <li>Automatic persistence</li>
                    <li>Ready-made conversation UI</li>
                    <li>Comprehensive error handling</li>
                    <li>All features included</li>
                </ul>
            </div>
        </div>

        <div class="demo-section">
            <h2>Simple Integration Example</h2>
            <div class="code-sample">
// Initialize widget with conversation management
const widget = CustomGPTWidget.init({
    apiKey: 'your-api-key',
    agentId: '123',
    agentName: 'Support Bot',
    mode: 'floating',
    enableConversationManagement: true,
    maxConversations: 10
});

// That's it! All features are built-in:
// - Session-based conversations
// - Persistence across page reloads
// - Conversation switching UI
// - Title editing
// - And more...
            </div>
        </div>

        <div class="demo-section">
            <h2>Widget API Methods</h2>
            <p>The widget instance provides these methods for advanced use cases:</p>
            <div class="code-sample">
// Get all conversations for current session
const conversations = widget.getConversations();

// Create a new conversation
const newConv = widget.createConversation('Customer Support');

// Switch to a different conversation
widget.switchConversation(conversationId);

// Update conversation title
widget.updateConversationTitle(conversationId, 'Order #12345');

// Delete a conversation
widget.deleteConversation(conversationId);
            </div>
        </div>

        <div class="demo-section">
            <h2>Live Demo - Embedded Widget</h2>
            <p>This widget has conversation management enabled. Try creating multiple conversations!</p>
            <div id="widget-demo"></div>
        </div>

        <div class="demo-section">
            <h2>Live Demo - Floating Button</h2>
            <p>Look for the floating button in the bottom-right corner. It includes all the same features!</p>
            <div id="floating-demo"></div>
        </div>
    </div>

    <script type="text/babel" src="./examples/SimplifiedWidget.jsx"></script>
    <script type="text/babel" src="./examples/SimplifiedFloatingButton.jsx"></script>
    
    <script type="text/babel">
        // Demo configuration
        const API_KEY = 'your-api-key-here';
        const AGENT_ID = '123';
        const AGENT_NAME = 'Demo Assistant';
        
        // Render embedded widget
        const WidgetDemo = () => {
            return (
                <SimplifiedCustomGPTWidget
                    apiKey={API_KEY}
                    agentId={AGENT_ID}
                    agentName={AGENT_NAME}
                    height="500px"
                    maxConversations={5}
                    enableConversationManagement={true}
                    onMessage={(msg) => console.log('Message:', msg)}
                    onConversationChange={(conv) => console.log('Conversation changed:', conv)}
                />
            );
        };
        
        // Render floating button
        const FloatingDemo = () => {
            return (
                <SimplifiedFloatingButton
                    apiKey={API_KEY}
                    agentId={AGENT_ID}
                    agentName={AGENT_NAME}
                    position="bottom-right"
                    maxConversations={5}
                    enableConversationManagement={true}
                />
            );
        };
        
        // Mount components
        ReactDOM.render(<WidgetDemo />, document.getElementById('widget-demo'));
        ReactDOM.render(<FloatingDemo />, document.getElementById('floating-demo'));
    </script>
</body>
</html>